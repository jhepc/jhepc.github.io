<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
    <title>John Hunter Excellence Plotting Contest &#8212; 2015 Scipy John Hunter Excellence in Plotting Contest Entries 0.0001 documentation</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet"
        href="../../_static/css/bootstrap.min.css"
	media="screen" />
    <script src="../../_static/js/jquery.js"
          type="text/javascript"></script>
  <script src="../../_static/js/bootstrap.min.js"
          type="text/javascript"></script>


    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport'
      content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="stylesheet"
        href="../../_static/css/jhepc.css"
         media="screen" />
  <link href='http://fonts.googleapis.com/css?family=PT+Serif'
        rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans'
        rel='stylesheet' type='text/css'>



  </head><body><div class="navbar">
    <a class="navbar-brand" href="../../index.html">
      <img src="../../_static/logos/logo_1.png" \>
    </a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Home
          <img src="../../_static/logos/button_orange.png">
        </a>
        </li>
      <li><a href="../../gallery.html">Gallery
          <img src="../../_static/logos/button_blue.png">
          </a>
      </li>
      <li><a href="../../about.html">About
          <img src="../../_static/logos/button_green.png">
          </a></li>
    </ul>
  </div>
  
    <div class="container">
  
  
  <div class="section" id="entry-1">
<h1>Entry 1<a class="headerlink" href="#entry-1" title="Permalink to this headline">¶</a></h1>
<img alt="../../_images/entry1.png" src="../../_images/entry1.png" />
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Frédéric Vogt</p></li>
<li><p>Luke Shingles</p></li>
</ul>
<p>Please find attached to this email our entry to the 2013 Scipy John
Hunter Excellence in Plotting Contest.</p>
<p>We rely on the Mayavi plotting module to create an interactive 3D map
of the oxygen-rich ejecta in the young supernova remnant N132D. These
‘chunks’ of pure oxygen correspond to the outer layers of a star that
have been expelled into space as it exploded some 2500 years
ago. Their distribution in 3D space is key to understanding the
explosion mechanism of the parent stars and its asymmetries. This data
was originally used and published in Vogt&amp;Dopita, Ap&amp;SS (2011), 331,
521 (<a class="reference external" href="http://adsabs.harvard.edu/abs/2010arXiv1009.0964V">http://adsabs.harvard.edu/abs/2010arXiv1009.0964V</a>), and more
recently in Vogt&amp;Shingles, Ap&amp;SS (2013), submitted.</p>
<p>Our plot is both ‘interactive’ and ‘augmented’. Relying on the
advances in PDF technology, we embed the interactive 3D map behind its
projection. When using Adobe Acrobat Reader, the viewer can load and
freely zoom, rotate and fly through the interactive model. In
addition, we rely on the latest advances in the area of augmented
reality to allow smartphone users to access an animation of the 3D map
directly on their device. The animation (and additional contact and
share options) can be accessed by snapping a picture of our plot with
a smartphone and the Layar app (freely available). A copy of the
interactive plot and of the movie is accessible online :
<a class="reference external" href="http://www.mso.anu.edu.au/~fvogt/dokuwiki/doku.php?id=Online_Material">http://www.mso.anu.edu.au/~fvogt/dokuwiki/doku.php?id=Online_Material</a></p>
<p>Understanding the 3D structure of the ejecta in this complex system
has been subject to much debate in the past. Being able to share with
the science community the exact 3D model, and giving them the
opportunity to directly interact and visualise it is key to a better
understanding of the mechanisms shaping young supernova remnants.</p>
<p>All plots are strictly produced with Python (see the attached code,
which was used to produce the projection, the interactive model and
the individual movie frames). To assemble our 3-layers final plot, we
rely on Latex and the movie15 package. We used ffmpeg to assemble the
movie frames into an animation, and used the PDF3D software to
transform the .vrml file produced from Mayavi into a .u3d file
compatible with Latex.</p>
<p>A pickled file containing the original data has not been included in
the submission because of its large size (~650Mb). If required, we
would be happy to make this file available online for the Contest
Organisers to access.</p>
<p>We are very much looking forward to the outcome of this exciting new
contest, and would welcome a confirmation that our entry has been
received.</p>
<p>With our best regards,
Frédéric Vogt and Luke Shingles</p>
</div>
<div class="section" id="products">
<h2>Products<a class="headerlink" href="#products" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../../_downloads/92258bc442c719f30a7cfc7a8b3a8585/Vogt+Shingles.pdf"><code class="xref download docutils literal notranslate"><span class="pre">PDF</span> <span class="pre">with</span> <span class="pre">interactive</span> <span class="pre">3D</span> <span class="pre">visualization</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/4680b8e95fafeb2734cfbfdaf86a5308/Vogt+Shingles.eps"><code class="xref download docutils literal notranslate"><span class="pre">EPS</span> <span class="pre">version</span></code></a></p></li>
</ul>
</div>
<div class="section" id="source">
<h2>Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>

<span class="kn">from</span> <span class="nn">enthought.tvtk.api</span> <span class="kn">import</span> <span class="n">tvtk</span>
<span class="kn">from</span> <span class="nn">enthought.mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="kn">from</span> <span class="nn">enthought.mayavi</span> <span class="kn">import</span> <span class="n">modules</span>
<span class="kn">import</span> <span class="nn">pyfits</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="c1"># Some constants ...</span>
<span class="n">size_x</span> <span class="o">=</span> <span class="mi">142</span>
<span class="n">size_y</span> <span class="o">=</span> <span class="mi">162</span>
<span class="n">astopc</span> <span class="o">=</span> <span class="mf">0.286040071</span> <span class="c1"># &quot; to pc</span>

<span class="c1"># Forground stars position ... chopped them off, </span>
<span class="c1"># and replace the by black spheres</span>
<span class="n">stars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">50</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">40</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">119</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">67</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span>
                  <span class="p">[</span><span class="mi">122</span><span class="p">,</span><span class="mi">42</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">67</span><span class="p">,</span><span class="mi">142</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">110</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">138</span><span class="p">,</span><span class="mi">98</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">136</span><span class="p">,</span><span class="mi">67</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">97</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>

<span class="c1"># Load the data ... a tad big, but it&#39;s a real IFU observation after all ...</span>
<span class="n">fn</span> <span class="o">=</span> <span class="s1">&#39;./data.pkl&#39;</span>
<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s1">&#39;De-pickling data ...&#39;</span>
<span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">x_b</span><span class="p">,</span><span class="n">y_b</span><span class="p">,</span><span class="n">z_b</span><span class="p">,</span>
 <span class="n">scidata_cleana</span><span class="p">,</span><span class="n">scidata_cleana_noplane</span><span class="p">,</span><span class="n">scidata_cleanb</span><span class="p">]</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span> <span class="s1">&#39;Plotting it ...&#39;</span>
<span class="c1"># Start plotting ... make it an interactive 3D map !</span>
<span class="n">fig1</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">),</span><span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span><span class="mi">900</span><span class="p">))</span>

<span class="n">surf2</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">contour3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">scidata_cleana</span><span class="p">,</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span>\
                <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;RdYlBu&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;[O III]-1&#39;</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">outline</span><span class="p">()</span>
<span class="n">surf3</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">contour3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">scidata_cleana</span><span class="p">,</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">40</span><span class="p">],</span>\
                <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;[O III]-2&#39;</span><span class="p">)</span>

<span class="n">surf5</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">contour3d</span><span class="p">(</span><span class="n">x_b</span><span class="p">,</span><span class="n">y_b</span><span class="p">,</span><span class="n">z_b</span><span class="p">,</span><span class="n">scidata_cleanb</span><span class="p">,</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span>\
                           <span class="n">opacity</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;autumn&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hbeta&#39;</span><span class="p">)</span>

<span class="n">surf6</span> <span class="o">=</span>  <span class="n">mlab</span><span class="o">.</span><span class="n">points3d</span><span class="p">((</span><span class="n">stars</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">size_x</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="o">*</span><span class="n">astopc</span><span class="p">,(</span><span class="n">stars</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">size_y</span><span class="o">/</span><span class="mf">2.</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="o">*</span><span class="n">astopc</span><span class="p">,</span><span class="n">stars</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">0.0</span><span class="p">,</span><span class="n">stars</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span><span class="o">*</span><span class="n">astopc</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Stars&#39;</span><span class="p">)</span>

<span class="c1"># Now to make it look decent ...</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span><span class="n">nb_labels</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">fly_mode</span> <span class="o">=</span> <span class="s1">&#39;outer_edges&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">title_text_property</span><span class="o">.</span><span class="n">font_size</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">ax</span><span class="o">.</span><span class="n">title_text_property</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="s1">&#39;courier&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">label_text_property</span><span class="o">.</span><span class="n">font_family</span> <span class="o">=</span> <span class="s1">&#39;courier&#39;</span>

<span class="c1"># And a bit of references if anyone is interested ...</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.95</span><span class="p">,</span><span class="s1">&#39;Oxygen-rich ejecta in SNR N132D. Vogt &amp; Dopita, Ap&amp;SS, 311, 521 (2011); Vogt &amp; Shingles, Ap&amp;SS (2013), submitted.&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="s1">&#39;fvogt@mso.anu.edu.au&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>

<span class="c1"># Label the axes ...</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">x_label</span> <span class="o">=</span> <span class="s1">&#39;X (Dec.) [pc]&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">y_label</span> <span class="o">=</span> <span class="s1">&#39;Y (R.A.) [pc]&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">z_label</span> <span class="o">=</span> <span class="s1">&#39;Z [pc]&#39;</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1"># Define the view point - useful to make a movie (not build here) ...</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">60</span><span class="p">)</span> 

<span class="c1"># Save it all ...</span>
<span class="c1">#mlab.savefig(&#39;Vogt+Shingles_test.wrl&#39;)</span>
<span class="c1">#mlab.savefig(&#39;Vogt+Shingles_test.eps&#39;)</span>
<span class="c1">#mlab.savefig(&#39;Vogt+Shingles_test.png&#39;)</span>

<span class="nb">print</span> <span class="s1">&#39;All done !&#39;</span>
<span class="c1"># End of the World as we know it ...</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../../_downloads/b3321bcd1d1459935a1851403427c185/Vogt+Shingles.py"><code class="xref download docutils literal notranslate"><span class="pre">Python</span> <span class="pre">source</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/c9862db66283b4673aeadabaa569af7e/Vogt+Shingles.u3d"><code class="xref download docutils literal notranslate"><span class="pre">U3D</span> <span class="pre">file</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/f40ec9b7a31548576f40a34e1697eb2c/Vogt+Shingles.wrl"><code class="xref download docutils literal notranslate"><span class="pre">VRML</span> <span class="pre">.wrl</span> <span class="pre">file</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/d75a00d47f07a56ed20183dafcf6591a/Vogt+Shingles.tex"><code class="xref download docutils literal notranslate"><span class="pre">LaTeX</span> <span class="pre">source</span></code></a></p></li>
</ul>
</div>
</div>


  
    </div>
  
<footer class="footer">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Scipy Conference, designed by Nelle Varoquaux.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.4.3.<br/>
    </p>
</footer>
  </body>
</html>